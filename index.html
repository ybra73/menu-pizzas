<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men√∫ Interactivo - Pizzas</title>
    <style>
        :root { --accent: #ff4d4d; --success: #25D366; --bg: #121212; --card: #1e1e1e; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: var(--bg); color: white; padding: 15px; }
        .container { max-width: 500px; margin: auto; padding-bottom: 80px; }
        h2 { text-align: center; color: var(--accent); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #888; font-size: 0.8rem; margin-bottom: 25px; }
        
        .pizza-card {
            background: var(--card); border-radius: 12px; margin-bottom: 15px;
            display: flex; align-items: center; border: 1px solid #333;
            overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .pizza-img { width: 95px; height: 95px; object-fit: cover; border-right: 1px solid #333; }
        .pizza-info { padding: 12px; flex: 1; }
        .pizza-info h3 { margin: 0; font-size: 1rem; color: #fff; font-weight: 600; }
        
        .price-container { display: flex; gap: 8px; margin-top: 10px; }
        /* Estilo de botones de precio */
        .price-tag {
            background: #262626; padding: 8px 4px; border-radius: 8px;
            flex: 1; text-align: center; border: 1px solid #444;
            cursor: pointer; text-decoration: none; transition: 0.3s;
            display: block;
        }
        .price-tag:hover { background: #333; border-color: var(--success); transform: translateY(-2px); }
        .price-tag small { display: block; font-size: 0.6rem; color: #aaa; text-transform: uppercase; margin-bottom: 2px; }
        .price-tag b { color: var(--success); font-size: 0.85rem; display: block; }

        .footer-info { text-align: center; font-size: 0.7rem; color: #555; margin-top: 20px; }
        
        /* BOT√ìN FLOTANTE MANTENIDO */
        .btn-whatsapp-float {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--success); width: 60px; height: 60px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.6); z-index: 1000;
            transition: transform 0.3s;
        }
        .btn-whatsapp-float:hover { transform: scale(1.1); }
    </style>
</head>
<body>

<div class="container">
    <h2>üçï Men√∫ de Pizzas</h2>
    <p class="subtitle">Toca un precio para ordenar directamente</p>
    
    <div id="pizzas-render">Cargando men√∫ desde la nube...</div>
    
    <div class="footer-info" id="status">Sincronizando precios...</div>
</div>

<a href="https://wa.me/584264014765?text=Hola!%20Tengo%20una%20consulta%20sobre%20el%20men√∫" class="btn-whatsapp-float" target="_blank" title="Chatear con nosotros">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="35" alt="WhatsApp">
</a>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxogztBYkgerNWGcPlNryposKITTqDbB9RRoCHOMehYMbwFm3tN4KoLBcM2_y0eoAMX/exec";
    const PHONE = "584264014765";

    // √çndices basados en tu captura de pantalla de Google Sheets
    const MENU_PIZZAS = [
        { name: "Margherita Romana", i35: 206, i20: 218 },
        { name: "Primavera Napolitana", i35: 207, i20: 219 },
        { name: "Vegetariana Milanesa", i35: 208, i20: 220 },
        { name: "Pizza Della Casa", i35: 209, i20: 221 },
        { name: "Peperoni Siciliana", i35: 210, i20: 222 },
        { name: "Hawaiana Vesuviana", i35: 211, i20: 223 },
        { name: "Ma√≠z Florentina", i35: 212, i20: 224 },
        { name: "Capresa Marianella", i35: 213, i20: 225 },
        { name: "Pollo Toscano", i35: 214, i20: 226 }
    ];

    function formatPrice(val) {
        if (!val) return "---";
        let clean = String(val).replace(/[Bs.]/g, '').replace(',', '.').trim();
        let num = parseFloat(clean);
        return isNaN(num) ? val : "Bs " + Math.round(num).toLocaleString('es-VE');
    }

    // Funci√≥n para crear el enlace de pedido autom√°tico
    function getOrderLink(pizza, size) {
        const text = encodeURIComponent(`Hola! üçï Quiero pedir una pizza *${pizza}* de *${size}*`);
        return `https://wa.me/${PHONE}?text=${text}`;
    }

    fetch(SCRIPT_URL)
    .then(r => r.json())
    .then(data => {
        const renderArea = document.getElementById('pizzas-render');
        renderArea.innerHTML = '';

        MENU_PIZZAS.forEach(pizza => {
            const p35Value = data[pizza.i35];
            const p20Value = data[pizza.i20];
            
            const p35Formatted = formatPrice(p35Value);
            const p20Formatted = formatPrice(p20Value);

            renderArea.innerHTML += `
                <div class="pizza-card">
                    <img src="https://img.freepik.com/fotos-premium/caja-pizza-pizzas-medio_1270925-1737.jpg" class="pizza-img">
                    <div class="pizza-info">
                        <h3>${pizza.name}</h3>
                        <div class="price-container">
                            <a href="${getOrderLink(pizza.name, '20 cm')}" target="_blank" class="price-tag">
                                <small>20 cm</small><b>${p20Formatted}</b>
                            </a>
                            <a href="${getOrderLink(pizza.name, '35 cm')}" target="_blank" class="price-tag">
                                <small>35 cm</small><b>${p35Formatted}</b>
                            </a>
                        </div>
                    </div>
                </div>
            `;
        });
        document.getElementById('status').innerText = "Precios en tiempo real | " + new Date().toLocaleTimeString();
    })
    .catch(err => {
        console.error(err);
        document.getElementById('pizzas-render').innerHTML = "<p style='text-align:center;'>Error de conexi√≥n. Revisa tu Google Sheet.</p>";
    });
</script>
</body>
</html>
