<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Men칰 de Pizzas</title>
  <style>
    body { margin: 0; padding: 1rem; background: #111; }
    .menu-container { max-width: 960px; margin: 0 auto; padding: 1rem; font-family: system-ui, sans-serif; background: #1b1b1b; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,.35); }
    .menu-header { text-align: center; margin-bottom: 1.5rem; }
    .menu-header h2 { font-size: 2rem; margin: 0 0 .25rem; color: #f5f5f5; }
    .menu-header p { font-size: .95rem; color: #bdbdbd; margin: 0; }
    .pizza-item { display: flex; gap: 1rem; align-items: center; padding: 1rem 0; border-bottom: 1px solid #333; }
    .pizza-item:last-child { border-bottom: 0; }
    .pizza-item img { width: 120px; height: 120px; object-fit: cover; border-radius: 10px; flex-shrink: 0; }
    .pizza-details { flex: 1; }
    .pizza-details h3 { margin: 0 0 .35rem; font-size: 1.2rem; color: #ff6b6b; }
    .pizza-details p { margin: .15rem 0; color: #e6e6e6; font-size: .9rem; }
    .price-row { display: flex; flex-wrap: wrap; gap: .5rem; margin-top: .5rem; }
    .pill { background: #262626; border: 1px solid #3a3a3a; padding: .4rem .8rem; border-radius: 999px; color: #d9ffd9; font-weight: 700; font-size: .95rem; }
    .pill small { color: #a0a0a0; font-weight: 400; margin-right: .3rem; }
    .updated-at { text-align: center; color: #666; font-size: .8rem; margin-top: 1rem; }
    .loading { text-align: center; color: #bdbdbd; padding: 2rem; }
    .error { text-align: center; color: #ffd6d6; padding: 2rem; }
    .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 20px; right: 20px; background-color: #25d366; border-radius: 50%; box-shadow: 0 2px 6px rgba(0,0,0,0.3); z-index: 999; display: flex; align-items: center; justify-content: center; transition: transform 0.2s ease; }
    .whatsapp-float:hover { transform: scale(1.08); }
    .whatsapp-float img { width: 35px; height: 35px; }
    @media (max-width: 640px) { .pizza-item { align-items: flex-start; } .pizza-item img { width: 90px; height: 90px; } }
  </style>
</head>
<body>

<div class="menu-container">
  <div class="menu-header">
    <h2>游꼣 Men칰 de Pizzas</h2>
    <p>AUT칄NTICAS PIZZAS ARTESANALES ITALIANAS<br>
    Hechas con masa casera, ingredientes frescos y ese sabor que te hace volver una y otra vez. <strong style="color:#ff6b6b">DELIVERY GRATIS</strong></p>
  </div>
  <div id="pizzaList" class="loading">Cargando men칰...</div>
  <div class="updated-at" id="updatedAt"></div>
</div>

<a href="https://wa.me/584264014765?text=Hola,%20quiero%20hacer%20un%20pedido%20de%20pizza%20游꼣"
   target="_blank" class="whatsapp-float" title="Pedir por WhatsApp">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
</a>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzK6LOP7NgM-PRE0s4M4AAZNFJzOWzniRkjPI2o53C2PrWISnaepnapxTdMtlenXBwO/exec';

const IMG_DEFAULT = 'https://img.freepik.com/fotos-premium/caja-pizza-pizzas-medio_1270925-1737.jpg';

const META = {
  "Margherita Romana":    { desc: "Salsa napolitana, mozzarella, jam칩n.", img: IMG_DEFAULT },
  "Primavera Napolitana": { desc: "Salsa napolitana, mozzarella, jam칩n, ma칤z.", img: IMG_DEFAULT },
  "Vegetariana Milanesa": { desc: "Salsa napolitana, mozzarella, champi침ones, aceitunas, piment칩n.", img: IMG_DEFAULT },
  "Peperoni Siciliana":   { desc: "Salsa napolitana, mozzarella, pepperoni.", img: "https://www.novachef.es/media/images/pizza-pepperoni.jpg" },
  "Pizza Della Casa":     { desc: "Salsa napolitana, mozzarella, jam칩n y pepperoni.", img: IMG_DEFAULT },
  "Hawaiana Vesuviana":   { desc: "Salsa napolitana, mozzarella, jam칩n y pi침a.", img: IMG_DEFAULT },
  "Ma칤z Florentina":      { desc: "Salsa napolitana, mozzarella, jam칩n y ma칤z.", img: IMG_DEFAULT },
  "Capresa Marianella":   { desc: "Salsa napolitana, mozzarella, tomate y jam칩n.", img: IMG_DEFAULT },
  "Pollo Toscano":        { desc: "Salsa napolitana, mozzarella, jam칩n, pollo, tocineta, ma칤z.", img: IMG_DEFAULT }
};

function formatBs(valor) {
  if (!valor && valor !== 0) return 'N/D';
  const num = parseFloat(String(valor).replace(/[^0-9.]/g, ''));
  if (isNaN(num)) return String(valor);
  return 'Bs ' + Math.round(num).toLocaleString('es-VE');
}

function renderPizzas(data) {
  const lista = document.getElementById('pizzaList');
  lista.className = '';
  lista.innerHTML = '';

  data.forEach(pizza => {
    const meta = META[pizza.nombre] || { desc: 'Pizza artesanal.', img: IMG_DEFAULT };
    const div = document.createElement('div');
    div.className = 'pizza-item';
    div.innerHTML =
      '<img src="' + meta.img + '" alt="' + pizza.nombre + '" onerror="this.src=\'' + IMG_DEFAULT + '\'">' +
      '<div class="pizza-details">' +
        '<h3>' + pizza.nombre + '</h3>' +
        '<p>' + meta.desc + '</p>' +
        '<div class="price-row">' +
          '<span class="pill"><small>20 cm</small>' + formatBs(pizza.p20) + '</span>' +
          '<span class="pill"><small>35 cm</small>' + formatBs(pizza.p35) + '</span>' +
        '</div>' +
      '</div>';
    lista.appendChild(div);
  });

  document.getElementById('updatedAt').textContent =
    'Actualizado: ' + new Date().toLocaleString('es-VE');
}

function cargarPizzas() {
  fetch(SCRIPT_URL)
    .then(r => r.json())
    .then(data => {
      if (!Array.isArray(data) || data.length === 0) throw new Error('Sin datos');
      renderPizzas(data);
    })
    .catch(err => {
      console.error(err);
      document.getElementById('pizzaList').className = 'error';
      document.getElementById('pizzaList').textContent = 'Error al cargar el men칰. Recarga la p치gina.';
    });
}

cargarPizzas();
setInterval(cargarPizzas, 5 * 60 * 1000);
</script>

</body>
</html>
